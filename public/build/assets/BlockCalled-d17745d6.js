import{y as _,j as e,r as o}from"./app-76ac79bc.js";import k from"./ConfirmDialog-9e068476.js";import{d as B,a as O}from"./Check-bdf46795.js";import{u as P}from"./useMutation-9c0fe89b.js";import{M as w}from"./Modal-62e9d8e0.js";import{r as D,i as E}from"./createSvgIcon-8cf6a347.js";import{B as r}from"./Box-168e7410.js";import{L as c}from"./LoadingButton-a5642ed6.js";import{B as F}from"./Button-3e190614.js";import"./createTheme-3079f5c5.js";import"./styled-28cc7788.js";import"./Modal-ec75f9fd.js";import"./TransitionGroupContext-6b0cedcb.js";import"./useId-255b287a.js";import"./Typography-2de56232.js";import"./extendSxProp-09aea199.js";import"./Container-d98a41af.js";import"./styled-65a01fc7.js";import"./createSvgIcon-26dc4856.js";import"./ButtonBase-810d52a6.js";const R=()=>P({mutationFn:async({id:a,props:s})=>{try{const{data:t}=await axios.patch(route("repairs.update.called",a),s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}},onSuccess:()=>{_.reload({only:["repairs"]})}});var d={},b=E;Object.defineProperty(d,"__esModule",{value:!0});var h=d.default=void 0,q=b(D()),z=e,I=(0,q.default)((0,z.jsx)("path",{d:"M6.5 5.5 12 11l7-7-1-1-6 6-4.5-4.5H11V3H5v6h1.5V5.5zm17.21 11.17C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73 1.6 0 3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.67 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71s-.12-.52-.3-.7z"}),"PhoneMissed");h=d.default=I;const re=({repair:a})=>{const s="is_called",[t,u]=o.useState(0),[v,p]=o.useState(!1),[C,n]=o.useState(!1),[i,H]=o.useState({[s]:0}),{mutate:m,isPending:l,isSuccess:f}=R();o.useEffect(()=>{u(a[s])},[a[s],t]),o.useEffect(()=>{f&&(u(i[s]),n(!1))},[f]);const g=async()=>{t===1?p(!0):n(!0)},y=()=>{m({id:a.id,props:{...i,[s]:0}})},x=async S=>{m({id:a.id,props:{...i,[s]:S}})},j=()=>{n(!1)},M=t?t===1?"success":"warning":"error";return e.jsxs(e.Fragment,{children:[e.jsx(w,{open:C,onClose:j,title:"Called",children:e.jsx(r,{sx:{display:"flex",gap:5,mt:5,flexDirection:"column"},children:e.jsxs(r,{sx:{display:"flex",gap:3,justifyContent:"space-between"},children:[e.jsx(r,{sx:{display:"flex",gap:3},children:e.jsx(c,{color:"success",loading:l,variant:"contained",onClick:()=>x(1),children:"Success call"})}),e.jsx(r,{sx:{display:"flex",gap:3},children:e.jsx(c,{color:"warning",loading:l,variant:"contained",onClick:()=>x(2),children:"Call again later"})}),e.jsx(r,{children:e.jsx(F,{variant:"contained",color:"primary",onClick:j,children:"Cancel"})})]})})}),e.jsx(k,{title:"Unmarked Called?",open:v,setOpen:p,onConfirm:y,children:"Are you sure? It will be unmarked as Called."}),e.jsxs(c,{loading:l,color:M,size:"small",variant:"text",onClick:g,children:[t===2&&e.jsx(h,{}),t===1&&e.jsx(B,{}),!t&&e.jsx(O,{})]})]})};export{re as default};
