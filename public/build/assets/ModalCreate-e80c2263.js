import{W as g,r as a,j as t}from"./app-2228c071.js";import l from"./BlockDivider-9ebb8136.js";import{M as b}from"./Modal-8f48e42c.js";import n from"./InputText-47b69fb6.js";import{u as S,r as C}from"./repairStore-b33d4834.js";import{A as D}from"./Autocomplete-b0df16fb.js";import{T as f}from"./TextField-e356d9ab.js";import{B as W}from"./Box-742bb19f.js";import{L as h}from"./LoadingButton-3f6e2ce0.js";import{B as _}from"./Button-73b0cdb9.js";import"./Typography-c3dc3365.js";import"./createTheme-dcf84243.js";import"./styled-fdc8b611.js";import"./generateUtilityClasses-96161c6c.js";import"./extendSxProp-a075ea99.js";import"./Modal-b8baee57.js";import"./TransitionGroupContext-1e4adf20.js";import"./useId-e7280e90.js";import"./Container-d8f66ffa.js";import"./styled-f28284cf.js";import"./isMuiElement-3d2ef873.js";import"./Menu-00a6b054.js";import"./createSvgIcon-e2e03bc9.js";import"./vanilla-8854675d.js";import"./IconButton-07e8dbf5.js";import"./ButtonBase-d5dccd8f.js";const $=({open:x,handleClose:v})=>{var d,m;const j=S(C).groupDevices,e=g({customer_name:"",customer_phone:"",device:"",problem_description:"",component:"",solution_description:"",price:"",cost:"",invoice:"",note:"",user_id:0}),[p,i]=a.useState(!1),c=async()=>{i(!0),await e.post("/repairs")};a.useEffect(()=>{i(e.wasSuccessful),s()},[e.wasSuccessful]),a.useEffect(()=>{i(e.processing)},[e.processing]);const s=()=>{e.reset(),v()};return t.jsxs(b,{open:x,onClose:s,title:"New repair",width:"md",children:[t.jsxs(l,{title:"Customer",children:[t.jsx(n,{label:"Name",form:e,name:"customer_name",props:{fullWidth:!0}}),t.jsx(n,{label:"Phone",form:e,name:"customer_phone",props:{fullWidth:!0}})]}),t.jsxs(l,{title:"Device",children:[t.jsx(D,{id:"free-solo-demo",fullWidth:!0,freeSolo:!0,options:j.map(r=>r.device),defaultValue:e.data.device||"",onInputChange:(r,o)=>{e.setData("device",o)},renderInput:r=>{var o,u;return t.jsx(f,{error:!!((o=e.errors)!=null&&o.device),helperText:(u=e.errors)==null?void 0:u.device,value:e.data.device||"",...r,label:"Device"})}}),t.jsx(n,{label:"Problem description",form:e,name:"problem_description",props:{fullWidth:!0}})]}),t.jsx(l,{title:"Note",children:t.jsx(f,{value:e.data.note||"",onChange:r=>e.setData("note",r.target.value),fullWidth:!0,id:"outlined-basic",label:"Note",error:!!((d=e.error)!=null&&d.note),helperText:(m=e.error)==null?void 0:m.note,variant:"outlined"})}),t.jsxs(W,{sx:{display:"flex",gap:5,flexDirection:"row"},children:[t.jsx(h,{fullWidth:!0,size:"large",color:"success",loading:p,variant:"contained",onClick:c,children:"Save"}),t.jsx(h,{fullWidth:!0,size:"large",color:"success",loading:p,variant:"contained",onClick:c,children:"Save and Print"}),t.jsx(_,{fullWidth:!0,variant:"contained",onClick:s,children:"Cancel"})]})]})};export{$ as default};
