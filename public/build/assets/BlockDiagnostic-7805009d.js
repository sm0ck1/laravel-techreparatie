import{y as k,r as o,j as e}from"./app-da48c8f9.js";import{d as M,a as B}from"./Check-1b0e2155.js";import{M as D}from"./Modal-e4a88e5e.js";import F from"./ConfirmDialog-acd0b4a7.js";import{u as b}from"./useMutation-ec442bb9.js";import{B as a}from"./Box-4dfd4bbf.js";import{T as E}from"./TextField-f71efeaf.js";import{L as g}from"./LoadingButton-342c7809.js";import{B as O}from"./Button-b49c3c51.js";import"./createSvgIcon-eb246c57.js";import"./createSvgIcon-6f86381a.js";import"./createTheme-061cdcb1.js";import"./styled-27a229f5.js";import"./useId-fc5ba434.js";import"./TransitionGroupContext-ca3410ef.js";import"./ButtonBase-766b9097.js";import"./Modal-ad6b4acc.js";import"./Container-fcb2d3d2.js";import"./styled-4e4dc2b0.js";import"./Typography-e0789043.js";import"./extendSxProp-a222c5ed.js";import"./Menu-1fc3e3a6.js";const w=()=>b({mutationFn:async({id:i,props:t})=>{try{const{data:s}=await axios.patch(route("repairs.update.diagnostic",i),t);return Promise.resolve(s)}catch(s){return Promise.reject(s.response.data.errors)}},onSuccess:()=>{k.reload({only:["repairs"]})}}),te=({repair:i})=>{const t="is_diagnostic",[s,l]=o.useState(!1),[h,d]=o.useState(!1),[j,r]=o.useState(!1),[n,y]=o.useState({diagnostic_description:"",[t]:!1}),{mutate:p,isPending:m,error:c,isError:C,isSuccess:u}=w();o.useEffect(()=>{l(!!i[t])},[]),o.useEffect(()=>{u&&(r(!1),l(!s))},[u]);const v=async x=>{i[t]?d(!0):r(!0)},S=async()=>{p({id:i.id,props:{[t]:!1,diagnostic_description:""}})},f=()=>{r(!1)},_=()=>{p({id:i.id,props:{...n,[t]:!0}})};return e.jsxs(e.Fragment,{children:[e.jsx(D,{open:j,onClose:f,title:"Diagnostic",children:e.jsxs(a,{sx:{display:"flex",gap:5,flexDirection:"column"},children:[e.jsx(a,{children:e.jsx(E,{value:n.diagnostic_description||"",onChange:x=>y({...n,diagnostic_description:x.target.value}),sx:{width:"100%"},id:"outlined-basic",label:"Result diagnostic",error:C,helperText:c==null?void 0:c.diagnostic_description,variant:"outlined"})}),e.jsxs(a,{sx:{display:"flex",gap:3,justifyContent:"space-between"},children:[e.jsx(a,{sx:{display:"flex",gap:3},children:e.jsx(g,{color:"success",disabled:!n.diagnostic_description,loading:m,variant:"contained",onClick:_,children:"Save"})}),e.jsx(a,{children:e.jsx(O,{variant:"contained",color:"primary",onClick:f,children:"Cancel"})})]})]})}),e.jsx(F,{title:"Unmarked Picked Up?",open:h,setOpen:d,onConfirm:S,children:"Are you sure? It will be unmarked as diagnostic."}),e.jsx(g,{loading:m,color:s?"success":"error",size:"small",variant:"text",onClick:v,children:s?e.jsx(e.Fragment,{children:e.jsx(M,{})}):e.jsx(B,{})})]})};export{te as default};
