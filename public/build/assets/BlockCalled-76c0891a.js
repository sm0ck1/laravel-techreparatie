import{y as x,r as a,j as t}from"./app-4046141f.js";import j from"./ConfirmDialog-570cef06.js";import{d as h,a as y}from"./Check-477cc82e.js";import{u as C}from"./useMutation-b0c41f25.js";import{L as g}from"./LoadingButton-142f046c.js";import"./createTheme-45223b27.js";import"./styled-ca6570b2.js";import"./Modal-d3c2b610.js";import"./TransitionGroupContext-91a870c1.js";import"./useId-436e340f.js";import"./Typography-b7819ec0.js";import"./extendSxProp-7b2aa809.js";import"./Button-bfc4daa2.js";import"./ButtonBase-565ed3e8.js";import"./createSvgIcon-e576eed7.js";import"./createSvgIcon-7e5898f0.js";const S=()=>C({mutationFn:async({id:o,props:s})=>{try{const{data:e}=await axios.patch(route("repairs.update.called",o),s);return Promise.resolve(e)}catch(e){return Promise.reject(e)}},onSuccess:()=>{x.reload({only:["repairs"]})}}),U=({repair:o})=>{const s="is_called",[e,r]=a.useState(!1),[m,i]=a.useState(!1),[n,k]=a.useState({[s]:!1}),{mutate:l,isPending:d,isSuccess:c}=S();a.useEffect(()=>{console.log("!!repair[field]",!!o[s]),r(!!o[s])},[]),a.useEffect(()=>{c&&r(!e)},[c]);const u=async()=>{e?i(!0):await f()},p=()=>{l({id:o.id,props:{...n,[s]:!1}})},f=async()=>{l({id:o.id,props:{...n,[s]:!0}})};return t.jsxs(t.Fragment,{children:[t.jsx(j,{title:"Unmarked Called?",open:m,setOpen:i,onConfirm:p,children:"Are you sure? It will be unmarked as Called."}),t.jsx(g,{loading:d,color:e?"success":"error",size:"small",variant:"text",onClick:u,children:e?t.jsx(t.Fragment,{children:t.jsx(h,{})}):t.jsx(y,{})})]})};export{U as default};
