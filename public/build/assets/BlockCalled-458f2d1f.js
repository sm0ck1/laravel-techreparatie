import{y as x,r as o,j as t}from"./app-a04bbed2.js";import j from"./ConfirmDialog-c17414c4.js";import{d as h,a as y}from"./Check-8e69b07b.js";import{u as C}from"./useMutation-bb265620.js";import{L as S}from"./LoadingButton-3147c087.js";import"./createTheme-6d13dc8e.js";import"./styled-5d21694d.js";import"./Modal-3a668b68.js";import"./TransitionGroupContext-d26061e7.js";import"./Typography-77cf11c3.js";import"./extendSxProp-ace8c235.js";import"./Button-7abc6489.js";import"./ButtonBase-f7e0d420.js";import"./createSvgIcon-9a7a4a4d.js";import"./createSvgIcon-45990ec8.js";const g=()=>C({mutationFn:async({id:a,props:s})=>{try{const{data:e}=await axios.patch(route("repairs.update.called",a),s);return Promise.resolve(e)}catch(e){return Promise.reject(e)}},onSuccess:()=>{x.reload({only:["repairs"]})}}),R=({repair:a})=>{const s="is_called",[e,r]=o.useState(!1),[m,i]=o.useState(!1),[n,k]=o.useState({[s]:!1}),{mutate:l,isPending:d,isSuccess:c}=g();o.useEffect(()=>{r(!!a[s])},[]),o.useEffect(()=>{c&&r(!e)},[c]);const u=async()=>{e?i(!0):await f()},p=()=>{l({id:a.id,props:{...n,[s]:!1}})},f=async()=>{l({id:a.id,props:{...n,[s]:!0}})};return t.jsxs(t.Fragment,{children:[t.jsx(j,{title:"Unmarked Called?",open:m,setOpen:i,onConfirm:p,children:"Are you sure? It will be unmarked as Called."}),t.jsx(S,{loading:d,color:e?"success":"error",size:"small",variant:"text",onClick:u,children:e?t.jsx(t.Fragment,{children:t.jsx(h,{})}):t.jsx(y,{})})]})};export{R as default};
