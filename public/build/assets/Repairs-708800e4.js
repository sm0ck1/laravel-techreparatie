import{r as m,j as a,d as vo}from"./app-a04bbed2.js";import ho from"./RepairsLayout-f058ed15.js";import{T as xo,a as io,b as Co,c as R,R as Bo}from"./Row-0a6fd4b6.js";import $o from"./ModalEdit-24fd475e.js";import Ro from"./ModalCreate-2d36275b.js";import{r as w}from"./repairStore-de3b468a.js";import{B as E}from"./Box-3fd40cc8.js";import{a as To,b as yo,B as S}from"./Button-7abc6489.js";import{T as Oo}from"./TextField-42cf80b5.js";import{f as c,_ as p,b as M,e as y,i as jo}from"./createTheme-6d13dc8e.js";import{a as _,g as N,s as O,b as H,c as k}from"./styled-5d21694d.js";import{u as eo}from"./BlockOrdered-caf5be40.js";import{b as oo}from"./Modal-3a668b68.js";import"./DashboardLayout-303b3f13.js";import"./createSvgIcon-9a7a4a4d.js";import"./createSvgIcon-45990ec8.js";import"./TransitionGroupContext-d26061e7.js";import"./ButtonBase-f7e0d420.js";import"./Container-7316657f.js";import"./styled-29c99bf0.js";import"./IconButton-699702c2.js";import"./Menu-2e5a6ace.js";import"./MenuItem-40342252.js";import"./dividerClasses-52288808.js";import"./Typography-77cf11c3.js";import"./extendSxProp-ace8c235.js";import"./Popper-d1a96f4b.js";import"./BlockInfo-46a1ef02.js";import"./editStore-d065645d.js";import"./vanilla-8854675d.js";import"./BlockInfoCustomer-2b1bbd47.js";import"./BlockInfoLayout-e579d15f.js";import"./BlockInfoOrdered-11a09c82.js";import"./BlockInfoFixed-8304ffc1.js";import"./BlockInfoPicked-83a49b8b.js";import"./BlockInfoCalled-1fe8f5c6.js";import"./BlockFixed-7b5ea897.js";import"./Check-8e69b07b.js";import"./ConfirmDialog-c17414c4.js";import"./repairPatch-adebb806.js";import"./Modal-58d08232.js";import"./useMutation-bb265620.js";import"./LoadingButton-3147c087.js";import"./BlockPickedUp-55d4674c.js";import"./BlockCalled-458f2d1f.js";import"./BlockDiagnostic-7ac0b1ad.js";import"./BlockDivider-4ab8a986.js";import"./InputText-f7355b65.js";import"./LocalShipping-29baf354.js";function Po(r){const{badgeContent:o,invisible:t=!1,max:e=99,showZero:d=!1}=r,s=eo({badgeContent:o,max:e});let n=t;t===!1&&o===0&&!d&&(n=!0);const{badgeContent:i,max:l=e}=n?s:r,b=i&&Number(i)>l?`${l}+`:i;return{badgeContent:i,invisible:n,max:l,displayValue:b}}function zo(r){return N("MuiBadge",r)}const Mo=_("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),T=Mo,_o=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],V=10,A=4,No=r=>{const{color:o,anchorOrigin:t,invisible:e,overlap:d,variant:s,classes:n={}}=r,i={root:["root"],badge:["badge",s,e&&"invisible",`anchorOrigin${c(t.vertical)}${c(t.horizontal)}`,`anchorOrigin${c(t.vertical)}${c(t.horizontal)}${c(d)}`,`overlap${c(d)}`,o!=="default"&&`color${c(o)}`]};return k(i,zo,n)},Ho=O("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,o)=>o.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),ko=O("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,o)=>{const{ownerState:t}=r;return[o.badge,o[t.variant],o[`anchorOrigin${c(t.anchorOrigin.vertical)}${c(t.anchorOrigin.horizontal)}${c(t.overlap)}`],t.color!=="default"&&o[`color${c(t.color)}`],t.invisible&&o.invisible]}})(({theme:r,ownerState:o})=>p({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:V*2,lineHeight:1,padding:"0 6px",height:V*2,borderRadius:V,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen})},o.color!=="default"&&{backgroundColor:(r.vars||r).palette[o.color].main,color:(r.vars||r).palette[o.color].contrastText},o.variant==="dot"&&{borderRadius:A,height:A*2,minWidth:A*2,padding:0},o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${T.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${T.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${T.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${T.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${T.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${T.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${T.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${T.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},o.invisible&&{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})})),Wo=m.forwardRef(function(o,t){var e,d,s,n,i,l;const b=H({props:o,name:"MuiBadge"}),{anchorOrigin:f={vertical:"top",horizontal:"right"},className:u,component:v,components:j={},componentsProps:x={},children:C,overlap:P="rectangular",color:W="default",invisible:B=!1,max:G=99,badgeContent:L,slots:h,slotProps:$,showZero:U=!1,variant:z="standard"}=b,no=M(b,_o),{badgeContent:Z,invisible:so,max:lo,displayValue:co}=Po({max:G,invisible:B,badgeContent:L,showZero:U}),po=eo({anchorOrigin:f,color:W,overlap:P,variant:z,badgeContent:L}),X=so||Z==null&&z!=="dot",{color:uo=W,overlap:go=P,anchorOrigin:mo=f,variant:q=z}=X?po:b,J=q!=="dot"?co:void 0,F=p({},b,{badgeContent:Z,invisible:X,max:lo,displayValue:J,showZero:U,anchorOrigin:mo,color:uo,overlap:go,variant:q}),K=No(F),Q=(e=(d=h==null?void 0:h.root)!=null?d:j.Root)!=null?e:Ho,Y=(s=(n=h==null?void 0:h.badge)!=null?n:j.Badge)!=null?s:ko,D=(i=$==null?void 0:$.root)!=null?i:x.root,I=(l=$==null?void 0:$.badge)!=null?l:x.badge,bo=oo({elementType:Q,externalSlotProps:D,externalForwardedProps:no,additionalProps:{ref:t,as:v},ownerState:F,className:y(D==null?void 0:D.className,K.root,u)}),fo=oo({elementType:Y,externalSlotProps:I,ownerState:F,className:y(K.badge,I==null?void 0:I.className)});return a.jsxs(Q,p({},bo,{children:[C,a.jsx(Y,p({},fo,{children:J}))]}))}),Uo=Wo;function Eo(r){return N("MuiButtonGroup",r)}const Lo=_("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),g=Lo,Go=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Fo=(r,o)=>{const{ownerState:t}=r;return[{[`& .${g.grouped}`]:o.grouped},{[`& .${g.grouped}`]:o[`grouped${c(t.orientation)}`]},{[`& .${g.grouped}`]:o[`grouped${c(t.variant)}`]},{[`& .${g.grouped}`]:o[`grouped${c(t.variant)}${c(t.orientation)}`]},{[`& .${g.grouped}`]:o[`grouped${c(t.variant)}${c(t.color)}`]},{[`& .${g.firstButton}`]:o.firstButton},{[`& .${g.lastButton}`]:o.lastButton},{[`& .${g.middleButton}`]:o.middleButton},o.root,o[t.variant],t.disableElevation===!0&&o.disableElevation,t.fullWidth&&o.fullWidth,t.orientation==="vertical"&&o.vertical]},Do=r=>{const{classes:o,color:t,disabled:e,disableElevation:d,fullWidth:s,orientation:n,variant:i}=r,l={root:["root",i,n==="vertical"&&"vertical",s&&"fullWidth",d&&"disableElevation"],grouped:["grouped",`grouped${c(n)}`,`grouped${c(i)}`,`grouped${c(i)}${c(n)}`,`grouped${c(i)}${c(t)}`,e&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return k(l,Eo,o)},Io=O("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Fo})(({theme:r,ownerState:o})=>p({display:"inline-flex",borderRadius:(r.vars||r).shape.borderRadius},o.variant==="contained"&&{boxShadow:(r.vars||r).shadows[2]},o.disableElevation&&{boxShadow:"none"},o.fullWidth&&{width:"100%"},o.orientation==="vertical"&&{flexDirection:"column"},{[`& .${g.grouped}`]:p({minWidth:40,"&:hover":p({},o.variant==="contained"&&{boxShadow:"none"})},o.variant==="contained"&&{boxShadow:"none"}),[`& .${g.firstButton},& .${g.middleButton}`]:p({},o.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},o.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},o.variant==="text"&&o.orientation==="horizontal"&&{borderRight:r.vars?`1px solid rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${g.disabled}`]:{borderRight:`1px solid ${(r.vars||r).palette.action.disabled}`}},o.variant==="text"&&o.orientation==="vertical"&&{borderBottom:r.vars?`1px solid rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${g.disabled}`]:{borderBottom:`1px solid ${(r.vars||r).palette.action.disabled}`}},o.variant==="text"&&o.color!=="inherit"&&{borderColor:r.vars?`rgba(${r.vars.palette[o.color].mainChannel} / 0.5)`:jo(r.palette[o.color].main,.5)},o.variant==="outlined"&&o.orientation==="horizontal"&&{borderRightColor:"transparent"},o.variant==="outlined"&&o.orientation==="vertical"&&{borderBottomColor:"transparent"},o.variant==="contained"&&o.orientation==="horizontal"&&{borderRight:`1px solid ${(r.vars||r).palette.grey[400]}`,[`&.${g.disabled}`]:{borderRight:`1px solid ${(r.vars||r).palette.action.disabled}`}},o.variant==="contained"&&o.orientation==="vertical"&&{borderBottom:`1px solid ${(r.vars||r).palette.grey[400]}`,[`&.${g.disabled}`]:{borderBottom:`1px solid ${(r.vars||r).palette.action.disabled}`}},o.variant==="contained"&&o.color!=="inherit"&&{borderColor:(r.vars||r).palette[o.color].dark},{"&:hover":p({},o.variant==="outlined"&&o.orientation==="horizontal"&&{borderRightColor:"currentColor"},o.variant==="outlined"&&o.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${g.lastButton},& .${g.middleButton}`]:p({},o.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},o.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},o.variant==="outlined"&&o.orientation==="horizontal"&&{marginLeft:-1},o.variant==="outlined"&&o.orientation==="vertical"&&{marginTop:-1})})),Vo=m.forwardRef(function(o,t){const e=H({props:o,name:"MuiButtonGroup"}),{children:d,className:s,color:n="primary",component:i="div",disabled:l=!1,disableElevation:b=!1,disableFocusRipple:f=!1,disableRipple:u=!1,fullWidth:v=!1,orientation:j="horizontal",size:x="medium",variant:C="outlined"}=e,P=M(e,Go),W=p({},e,{color:n,component:i,disabled:l,disableElevation:b,disableFocusRipple:f,disableRipple:u,fullWidth:v,orientation:j,size:x,variant:C}),B=Do(W),G=m.useMemo(()=>({className:B.grouped,color:n,disabled:l,disableElevation:b,disableFocusRipple:f,disableRipple:u,fullWidth:v,size:x,variant:C}),[n,l,b,f,u,v,x,C,B.grouped]),L=(h,$)=>{const U=h===0,z=h===m.Children.count($)-1;return U&&z?"":U?B.firstButton:z?B.lastButton:B.middleButton};return a.jsx(Io,p({as:i,role:"group",className:y(B.root,s),ref:t,ownerState:W},P,{children:a.jsx(To.Provider,{value:G,children:m.Children.map(d,(h,$)=>m.isValidElement(h)?a.jsx(yo.Provider,{value:L($,d),children:h}):h)})}))}),Ao=Vo;function Zo(r){return N("MuiTable",r)}_("MuiTable",["root","stickyHeader"]);const Xo=["className","component","padding","size","stickyHeader"],qo=r=>{const{classes:o,stickyHeader:t}=r;return k({root:["root",t&&"stickyHeader"]},Zo,o)},Jo=O("table",{name:"MuiTable",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:t}=r;return[o.root,t.stickyHeader&&o.stickyHeader]}})(({theme:r,ownerState:o})=>p({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":p({},r.typography.body2,{padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},o.stickyHeader&&{borderCollapse:"separate"})),ro="table",Ko=m.forwardRef(function(o,t){const e=H({props:o,name:"MuiTable"}),{className:d,component:s=ro,padding:n="normal",size:i="medium",stickyHeader:l=!1}=e,b=M(e,Xo),f=p({},e,{component:s,padding:n,size:i,stickyHeader:l}),u=qo(f),v=m.useMemo(()=>({padding:n,size:i,stickyHeader:l}),[n,i,l]);return a.jsx(xo.Provider,{value:v,children:a.jsx(Jo,p({as:s,role:s===ro?null:"table",ref:t,className:y(u.root,d),ownerState:f},b))})}),Qo=Ko;function Yo(r){return N("MuiTableBody",r)}_("MuiTableBody",["root"]);const wo=["className","component"],So=r=>{const{classes:o}=r;return k({root:["root"]},Yo,o)},or=O("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(r,o)=>o.root})({display:"table-row-group"}),rr={variant:"body"},to="tbody",tr=m.forwardRef(function(o,t){const e=H({props:o,name:"MuiTableBody"}),{className:d,component:s=to}=e,n=M(e,wo),i=p({},e,{component:s}),l=So(i);return a.jsx(io.Provider,{value:rr,children:a.jsx(or,p({className:y(l.root,d),as:s,ref:t,role:s===to?null:"rowgroup",ownerState:i},n))})}),ar=tr;function ir(r){return N("MuiTableContainer",r)}_("MuiTableContainer",["root"]);const er=["className","component"],nr=r=>{const{classes:o}=r;return k({root:["root"]},ir,o)},sr=O("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(r,o)=>o.root})({width:"100%",overflowX:"auto"}),lr=m.forwardRef(function(o,t){const e=H({props:o,name:"MuiTableContainer"}),{className:d,component:s="div"}=e,n=M(e,er),i=p({},e,{component:s}),l=nr(i);return a.jsx(sr,p({ref:t,as:s,className:y(l.root,d),ownerState:i},n))}),dr=lr;function cr(r){return N("MuiTableHead",r)}_("MuiTableHead",["root"]);const pr=["className","component"],ur=r=>{const{classes:o}=r;return k({root:["root"]},cr,o)},gr=O("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(r,o)=>o.root})({display:"table-header-group"}),mr={variant:"head"},ao="thead",br=m.forwardRef(function(o,t){const e=H({props:o,name:"MuiTableHead"}),{className:d,component:s=ao}=e,n=M(e,pr),i=p({},e,{component:s}),l=ur(i);return a.jsx(io.Provider,{value:mr,children:a.jsx(gr,p({as:s,className:y(l.root,d),ref:t,role:s===ao?null:"rowgroup",ownerState:i},n))})}),fr=br,ut=({repairs:r,employees:o,groupWhereOrdered:t})=>{const[e,d]=m.useState(!1),[s,n]=m.useState(!1),[i,l]=m.useState([{name:"All",url:""},{name:"Not called",url:"?filter[is_called]=0&filter[is_picked_up]=0&filter[is_fixed]=1"},{name:"Not fixed",url:"?filter[is_fixed]=0&filter[is_ordered_component]=0"},{name:"Awaits order",url:"?filter[is_fixed]=0&filter[is_ordered_component]=1&filter[is_picked_up]=0"},{name:"Not taken yet",url:"?filter[is_picked_up]=0&filter[is_fixed]=1"}]);m.useEffect(()=>{w.employees=o,w.groupWhereOrdered=t},[t]),m.useEffect(()=>{i.map((u,v)=>{axios.get("/repairs/counter"+u.url).then(j=>{l(x=>x.map((C,P)=>(v===P&&(C.counter=j.data.total),C)))})})},[]);const b=()=>{d(!1)},f={"&.Mui-disabled":{color:"white",backgroundColor:"#719ef8"}};return a.jsxs(ho,{children:[a.jsx(Ro,{open:e,handleClose:b}),a.jsx($o,{}),a.jsxs(E,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:5,mb:2},children:[a.jsx(E,{children:a.jsx(S,{variant:"contained",color:"success",onClick:()=>d(!0),children:"New repair"})}),a.jsxs(E,{sx:{display:"flex",flexDirection:"row",gap:2},children:[a.jsx(E,{children:a.jsx(Oo,{sx:{maxWidth:"300px",width:"100%",flexGrow:1},size:"small",id:"search-field",label:"Search"})}),a.jsx(Ao,{variant:"contained","aria-label":"outlined primary button group",children:i.map((u,v)=>a.jsx(Uo,{color:"secondary",badgeContent:u.counter||0,children:a.jsx(S,{sx:f,disabled:location.search===u.url,component:vo,href:"/repairs"+u.url,children:u.name})},v))})]})]}),r.data.length>0&&a.jsx(a.Fragment,{children:a.jsx(dr,{children:a.jsxs(Qo,{"aria-label":"simple table",size:"small",children:[a.jsx(fr,{children:a.jsxs(Co,{children:[a.jsx(R,{}),a.jsx(R,{}),a.jsx(R,{}),a.jsx(R,{align:"center",children:"Diagnostic"}),a.jsx(R,{align:"center",children:"Ordered"}),a.jsx(R,{align:"center",children:"Fixed"}),a.jsx(R,{align:"center",children:"Called"}),a.jsx(R,{align:"center",children:"Picked up"})]})}),a.jsx(ar,{children:r.data.map(u=>a.jsx(Bo,{repair:u,open:s,setOpen:n},u.id))})]})})}),r.data.length===0&&a.jsx(E,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:a.jsx("h2",{children:"No data"})})]})};export{ut as default};
