import{y as _,j as e,r as o}from"./app-2228c071.js";import k from"./ConfirmDialog-8b7e1793.js";import{d as B,a as O}from"./Check-b7a3b9ba.js";import{u as P}from"./useMutation-2404ef3d.js";import{M as w}from"./Modal-8f48e42c.js";import{r as D,i as E}from"./createSvgIcon-15455139.js";import{B as r}from"./Box-742bb19f.js";import{L as c}from"./LoadingButton-3f6e2ce0.js";import{B as F}from"./Button-73b0cdb9.js";import"./createTheme-dcf84243.js";import"./styled-fdc8b611.js";import"./generateUtilityClasses-96161c6c.js";import"./Modal-b8baee57.js";import"./TransitionGroupContext-1e4adf20.js";import"./useId-e7280e90.js";import"./Typography-c3dc3365.js";import"./extendSxProp-a075ea99.js";import"./Container-d8f66ffa.js";import"./styled-f28284cf.js";import"./createSvgIcon-e2e03bc9.js";import"./isMuiElement-3d2ef873.js";import"./ButtonBase-d5dccd8f.js";const R=()=>P({mutationFn:async({id:a,props:s})=>{try{const{data:t}=await axios.patch(route("repairs.update.called",a),s);return Promise.resolve(t)}catch(t){return Promise.reject(t)}},onSuccess:()=>{_.reload({only:["repairs"]})}});var d={},b=E;Object.defineProperty(d,"__esModule",{value:!0});var h=d.default=void 0,q=b(D()),z=e,I=(0,q.default)((0,z.jsx)("path",{d:"M6.5 5.5 12 11l7-7-1-1-6 6-4.5-4.5H11V3H5v6h1.5V5.5zm17.21 11.17C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71s.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73 1.6 0 3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.67 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71s-.12-.52-.3-.7z"}),"PhoneMissed");h=d.default=I;const ne=({repair:a})=>{const s="is_called",[t,p]=o.useState(0),[v,u]=o.useState(!1),[C,i]=o.useState(!1),[n,H]=o.useState({[s]:0}),{mutate:m,isPending:l,isSuccess:f}=R();o.useEffect(()=>{p(a[s])},[a[s],t]),o.useEffect(()=>{f&&(p(n[s]),i(!1))},[f]);const g=async()=>{t===1?u(!0):i(!0)},y=()=>{m({id:a.id,props:{...n,[s]:0}})},x=async S=>{m({id:a.id,props:{...n,[s]:S}})},j=()=>{i(!1)},M=t?t===1?"success":"warning":"error";return e.jsxs(e.Fragment,{children:[e.jsx(w,{open:C,onClose:j,title:"Called",children:e.jsx(r,{sx:{display:"flex",gap:5,mt:5,flexDirection:"column"},children:e.jsxs(r,{sx:{display:"flex",gap:3,justifyContent:"space-between"},children:[e.jsx(r,{sx:{display:"flex",gap:3},children:e.jsx(c,{color:"success",loading:l,variant:"contained",onClick:()=>x(1),children:"Success call"})}),e.jsx(r,{sx:{display:"flex",gap:3},children:e.jsx(c,{color:"warning",loading:l,variant:"contained",onClick:()=>x(2),children:"Call again later"})}),e.jsx(r,{children:e.jsx(F,{variant:"contained",color:"primary",onClick:j,children:"Cancel"})})]})})}),e.jsx(k,{title:"Unmarked Called?",open:v,setOpen:u,onConfirm:y,children:"Are you sure? It will be unmarked as Called."}),e.jsxs(c,{loading:l,color:M,size:"small",variant:"text",onClick:g,children:[t===2&&e.jsx(h,{}),t===1&&e.jsx(B,{}),!t&&e.jsx(O,{})]})]})};export{ne as default};
